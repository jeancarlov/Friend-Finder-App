<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>FriendFinder</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

  <!-- Chosen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>

</head>

<body>

  <div class="container">

    <h2>Survey Questions</h2>
    <hr>

    <h3><strong>Tell me how well you know this soccer teams</strong></h3>
    <h4>Name (Required)</h4>
    <input type="text" id="name" name="fir" class="form-control" required="">

    <h4>Link to Photo Image (Required)</h4>
    <input type="text" id="photo" class="form-control" required="">

    <hr>

    <h3><strong>Question 1</strong></h3>
    <h4>How well do you know about Atletico de Madrid?</h4>
    <select class="chosen-select" id="q1">
      <option value=""></option>
      <option value="1">1 (Do not Know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>

    </select>

    <h3><strong>Question 2</strong></h3>
    <h4>How well do you know about Chelsea?</h4>
    <select class="chosen-select" id="q2">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>

    </select>

    <h3><strong>Question 3</strong></h3>
    <h4>How well do you know about Real Madrid?</h4>
    <select class="chosen-select" id="q3">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 4</strong></h3>
    <h4>How well do you know about Arsenal?</h4>
    <select class="chosen-select" id="q4">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 5</strong></h3>
    <h4>How well do you know about Barcelona?</h4>
    <select class="chosen-select" id="q5">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 6</strong></h3>
    <h4>How well do you know about Juventus?</h4>
    <select class="chosen-select" id="q6">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 7</strong></h3>
    <h4>How well do you know about PSG?</h4>
    <select class="chosen-select" id="q7">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 8 </strong></h3>
    <h4>How well do you know about Rome?</h4>
    <select class="chosen-select" id="q8">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 9</strong></h3>
    <h4>How well do you know about INTER?</h4>
    <select class="chosen-select" id="q9">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>

    <h3><strong>Question 10</strong></h3>
    <h4>How well do you know about Bayen Munich?</h4>
    <select class="chosen-select" id="q10">
      <option value=""></option>
      <option value="1">1 (Do not know)</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5 (I am a fan)</option>
    </select>



    <br>
    <br>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle"
        aria-hidden="true"></i>
      Submit</button>

    <hr>
    <footer class="footer">
      <div class="container">
        <p><a href="/api/friends">API Friends List</a> | <a href="">GitHub Repo</a></p>
      </div>
    </footer>

  </div>

  <div class="modal fade" id="results-modal" tabindex="-1" role="dialog">
      <div class="modal-dialog" role="document">
          <div class="modal-content">
              <div class="modal-header">
                  <h5 class="modal-title">Your best match!</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">X</button>
              </div>
              <div class="modal-body">
                      <h2 id="match-name"></h2>
                      <img id="match-photo" alt="" style="max-height: 300px" style="max-width: 250px">
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
              </div>
          </div>
      </div>
  </div>
 

  <!-- BELOW CODE IS CRITICAL. IT HANDLES HOW FORM DATA IS SENT TO OUR SERVER -->
  <!-- <script type="text/javascript" src="/app/public/clienside-js/friendsMatch.js"></script> -->
  <script>

    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
    // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
    // Our api recognizes the route (/api/tables)... and then runs the associated code (found in api-routes.js).
    // In this case the associated code "saves" the data to the table-data.js file or waitinglist-data.js file

    $("#submit").on("click", function (event) {

      event.preventDefault();

      // Here we grab the form elements
      var newSummitResult = {
        name: $("#name").val().trim(),
        photo: $("#photo").val().trim(),
        scores: [


          $("#q1").val().trim(),
          $("#q2").val().trim(),
          $("#q3").val().trim(),
          $("#q4").val().trim(),
          $("#q5").val().trim(),
          $("#q6").val().trim(),
          $("#q7").val().trim(),
          $("#q8").val().trim(),
          $("#q9").val().trim(),
          $("#q10").val().trim(),
        ]
      };

      console.log(newSummitResult);

      // This line is the magic. It"s very similar to the standard ajax function we used.
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
      // depending on if a tables is available or not.

      $.post("/api/friends", newSummitResult)
        .then(function (data) {

          if (data) {
            // alert("you did it !");
              $("#match-photo").attr("src", data.photo);
              $("#match-name").text(data.name);
              $("#results-modal").modal("toggle");
           
          }

          // If a table is available... tell user they on the waiting list.
          else {
            alert("Sorry please completed the survey");
          }
          $("#name").val("")
        $("#photo").val("")
          $("#q1").val("")
          $("#q2").val("")
          $("#q3").val("")
          $("#q4").val("")
          $("#q5").val("")
          $("#q6").val("")
          $("#q7").val("")
          $("#q8").val("")
          $("#q9").val("")
          $("#q10").val("")

        });

    });
//Link to the cientside
  </script>
</body>

</html>